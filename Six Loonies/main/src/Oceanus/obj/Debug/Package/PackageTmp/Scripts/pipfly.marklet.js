var oceanusDevMode = false; var oceanusPostCSSClassName = "oceanus-content"; var showingArticleClip = false; var showingPhotoClip = false; var showingVideoClip = false; var debug = function (s) { if (typeof console !== 'undefined' && oceanusDevMode) console.log("Oceanus: " + s) }; var oceanus = { version: '0.1', iframeLoads: 0, frameHack: false, documentCopy: null, regexps: { unlikelyCandidatesRe: /combx|comment|disqus|foot|header|menu|meta|navmenu|navigation|dropdown|\bnav\b|rss|shoutbox|sidebar|sponsor/i, unlikelyAdLinksRe: /offercode/i, maybeCandidateRe: /and|article|body|column|main/i, positiveRe: /article|body|content|entry|hentry|page|pagination|post|text/i, negativeRe: /combx|comment|contact|foot|footer|footnote|link|media|meta|promo|related|scroll|shoutbox|sponsor|tags|widget/i, divToPElementsRe: /<(a|blockquote|dl|div|img|ol|p|pre|table|ul)/i, divToPElementsWithLinkRe: /<(blockquote|dl|div|img|ol|p|pre|table|ul)/i, replaceBrsRe: /(<br[^>]*>[ \n\r\t]*){2,}/gi, replaceFontsRe: /<(\/?)font[^>]*>/gi, postRe: /(\bpost\b)|(\bpost-([1234567890]{1,})\b)|(\bcnnPostWrap\b)|(\bpostbox\b)|(\bstory\b)/i, trimRe: /^\s+|\s+$/g, normalizeRe: /\s{2,}/g, killBreaksRe: /(<br\s*\/?>(\s|&nbsp;?)*){1,}/g, videoRe: /http:\/\/(www\.)?(youtube|vimeo)\.com/i, closeTextRe: /close/i }, init: function (a) { if (document.body && !oceanus.documentCopy) { oceanus.documentCopy = document.createElement("body"); oceanus.documentCopy.innerHTML = document.body.innerHTML } oceanus.prepDocument(); var b = document.createElement("DIV"); var c = document.createElement("DIV"); var d = oceanus.grabArticles(); if (d.length < 1) { return } else { for (var i = 0; i < d.length; ++i) { var f = ""; try { var g = sl_jQuery('.oceanus-title', d[i]); if (g != 'undefined' && g != null && g.length > 0) { g = g[0]; var h = oceanus.getInnerText(g, false); f = sl_jQuery.trim(oceanus.getInnerText(g, false)) } } catch (e) { } if ((oceanus.getInnerText(d[i], false).length - f.length) < 275) { d.splice(i, 1) } } if (d.length >= 1) { document.articles = d } else { document.articles = null } } }, getArticleTitle: function () { var a = document.createElement("a"); a.href = window.location.href; var b = document.createElement("h2"); b.className = "oceanus-title"; b.innerHTML = document.title; a.appendChild(b); return a }, prepDocument: function () { if (document.body === null) { body = document.createElement("body"); try { oceanus.documentCopy = body } catch (e) { document.documentElement.appendChild(body); oceanus.documentCopy = document.body } } var a = oceanus.documentCopy.getElementsByTagName('frame'); if (a.length > 0) { var b = null; var c = 0; for (var d = 0; d < a.length; d++) { var f = a[d].offsetWidth + a[d].offsetHeight; var g = false; try { a[d].contentWindow.document.body; g = true } catch (e) { } if (g && f > c) { b = a[d]; c = f } } if (b) { var h = document.createElement('body'); h.innerHTML = b.contentWindow.document.body.innerHTML; h.style.overflow = 'scroll'; oceanus.documentCopy = h } } var l = oceanus.documentCopy.getElementsByTagName('script'); for (i = l.length - 1; i >= 0; i--) { if (typeof (l[i].src) == "undefined" || (l[i].src.indexOf('pipfly') == -1 || (oceanusDevMode && l[i].src.indexOf('localhost') == -1))) { l[i].parentNode.removeChild(l[i]) } } var m = oceanus.documentCopy.getElementsByTagName("style"); for (var j = 0; j < m.length; j++) { if (navigator.appName != "Microsoft Internet Explorer") { m[j].textContent = "" } } var n = oceanus.documentCopy.getElementsByTagName("a"); for (var k = 0; k < n.length; k++) { var o = oceanus.getInnerText(n[k], true); if (o.search(oceanus.regexps.closeTextRe) == 0) { var p = n[k].parentNode; var q = null; if (p != 'undefined' && p != null) { q = p.parentNode } if (q != 'undefined' && q != null) { q.removeChild(p) } } } var r = new Array(); for (var s = 0; (node = document.getElementsByTagName('div')[s]); s++) { if ((node.id !== 'undefined' && node.id != null && node.id != '') || (node.className !== 'undefined' && node.className != null && node.className != '')) { if (isHidden(node)) { r.push(node) } } } var t = new Array(); for (var s = 0; (node = document.getElementsByTagName('img')[s]); s++) { if ((node.id !== 'undefined' && node.id != null && node.id != '') || (node.className !== 'undefined' && node.className != null && node.className != '')) { if (isHidden(node)) { t.push(node) } } } var u = new Array(); for (var s = 0; (node = document.getElementsByTagName('p')[s]); s++) { var v = node.parentNode; var w = null; if (v != null) { w = v.parentNode } if (v != null && sl_jQuery(v).css('float') != 'undefined' && (sl_jQuery(v).css('float') == 'right' || sl_jQuery(v).css('float') == 'left')) { u.push(node); continue } if (w != null && sl_jQuery(w).css('float') != 'undefined' && (sl_jQuery(w).css('float') == 'right' || sl_jQuery(w).css('float') == 'left')) { u.push(node); continue } } document.floatingParagraphs = u; for (var s = 0; (node = oceanus.documentCopy.getElementsByTagName('div')[s]); s++) { if (node.id !== 'undefined' && node.id != null && node.id != '') { for (var x = 0; x < r.length; x++) { var y = r[x]; if (y.id !== 'undefined' && y.id != null && y.id != '' && y.id == node.id) { if (isHidden(y)) { if (node.parentNode != 'undefined' && node.parentNode != null) { node.parentNode.removeChild(node); s-- } } } } } else if (node.className !== 'undefined' && node.className != null && node.className != '') { for (var x = 0; x < r.length; x++) { var y = r[x]; if (y.className !== 'undefined' && y.className != null && y.className != '' && y.className == node.className) { if (y.innerHTML == node.innerHTML) { if (node.parentNode != 'undefined' && node.parentNode != null) { node.parentNode.removeChild(node); s-- } } } } } } for (var s = 0; (node = oceanus.documentCopy.getElementsByTagName('img')[s]); s++) { if (node.id !== 'undefined' && node.id != null && node.id != '') { for (var x = 0; x < t.length; x++) { var y = t[x]; if (y.id !== 'undefined' && y.id != null && y.id != '' && y.id == node.id) { if (isHidden(y)) { if (node.parentNode != 'undefined' && node.parentNode != null) { node.parentNode.removeChild(node); s-- } } } } } else if (node.className !== 'undefined' && node.className != null && node.className != '') { for (var x = 0; x < t.length; x++) { var y = t[x]; if (y.className !== 'undefined' && y.className != null && y.className != '' && y.className == node.className) { if (y.innerHTML == node.innerHTML) { if (node.parentNode != 'undefined' && node.parentNode != null) { node.parentNode.removeChild(node); s-- } } } } } } r = null; t = null; oceanus.documentCopy.innerHTML = oceanus.documentCopy.innerHTML.replace(oceanus.regexps.replaceBrsRe, '</p><p>').replace(oceanus.regexps.replaceFontsRe, '') }, prepArticle: function (g) { oceanus.cleanStyles(g); oceanus.killBreaks(g); oceanus.clean(g, "form"); oceanus.clean(g, "object"); oceanus.clean(g, "h1"); if (g.getElementsByTagName('h2').length == 1 && g.getElementsByTagName('h2')[0].className != "oceanus-title") oceanus.clean(g, "h2"); oceanus.clean(g, "iframe"); oceanus.cleanHeaders(g); if (g.className != "" && g.className == oceanusPostCSSClassName) { oceanus.cleanConditionally(g, "table", true); oceanus.cleanConditionally(g, "ul", true); oceanus.cleanConditionally(g, "div", true) } else { oceanus.cleanConditionally(g, "table", false); oceanus.cleanConditionally(g, "ul", false); oceanus.cleanConditionally(g, "div", false) } var h = g.getElementsByTagName('p'); for (i = h.length - 1; i >= 0; i--) { var k = h[i].getElementsByTagName('img').length; var l = h[i].getElementsByTagName('embed').length; var m = h[i].getElementsByTagName('object').length; if (k == 0 && l == 0 && m == 0 && oceanus.getInnerText(h[i], false) == '') { h[i].parentNode.removeChild(h[i]) } } try { g.innerHTML = g.innerHTML.replace(/<br[^>]*>\s*<p/gi, '<p') } catch (e) { debug("Cleaning innerHTML of breaks failed. This is an IE strict-block-elements bug. Ignoring.") } sl_jQuery('a', g).each(function () { var a = document.createElement('a'); a.href = this.href; this.href = a.href; sl_jQuery(this).attr('onclick', '') }); sl_jQuery('img', g).each(function () { var j = new Image; j.src = this.src; if (j.width > 50 && j.height > 50) { for (var a = 0; (node = document.body.getElementsByTagName('img')[a]); a++) { if (node.src == this.src) { try { var b = sl_jQuery(node).css('float'); var c = ''; var d = sl_jQuery(node).closest('div'); var f = sl_jQuery(this).closest('div'); if (d != 'undefined') { c = sl_jQuery(d).css('float') } if (b == 'right' || b == 'left') { sl_jQuery(this).css('float', b) } if (c == 'right' || c == 'left') { if (sl_jQuery(f).attr('class') != 'oceanus-content' && sl_jQuery(f).html() == d.innerHTML) { sl_jQuery(f).css('float', c) } else { sl_jQuery(this).css('float', c) } } if (sl_jQuery(node).width() != 'undefined') { sl_jQuery(this).width(sl_jQuery(node).width()) } if (sl_jQuery(node).height() != 'undefined') { sl_jQuery(this).height(sl_jQuery(node).height()) } if (sl_jQuery(node).css('padding') != 'undefined') { sl_jQuery(this).css('padding', sl_jQuery(node).css('padding')) } if (sl_jQuery(node).css('padding-left') != 'undefined') { sl_jQuery(this).css('padding-left', sl_jQuery(node).css('padding-left')) } if (sl_jQuery(node).css('padding-right') != 'undefined') { sl_jQuery(this).css('padding-right', sl_jQuery(node).css('padding-right')) } if (sl_jQuery(node).css('padding-top') != 'undefined') { sl_jQuery(this).css('padding-top', sl_jQuery(node).css('padding-top')) } if (sl_jQuery(node).css('padding-bottom') != 'undefined') { sl_jQuery(this).css('padding-bottom', sl_jQuery(node).css('padding-bottom')) } if (sl_jQuery(d).css('padding') != 'undefined') { if (sl_jQuery(f).attr('class') != 'oceanus-content' && sl_jQuery(f).html() == d.innerHTML) { sl_jQuery(f).css('padding', sl_jQuery(d).css('padding')) } else { sl_jQuery(this).css('padding', sl_jQuery(d).css('padding')) } } if (sl_jQuery(d).css('padding-left') != 'undefined') { if (sl_jQuery(f).attr('class') != 'oceanus-content' && sl_jQuery(f).html() == d.innerHTML) { sl_jQuery(f).css('padding-left', sl_jQuery(d).css('padding-left')) } else { sl_jQuery(this).css('padding-left', sl_jQuery(d).css('padding-left')) } } if (sl_jQuery(d).css('padding-right') != 'undefined') { if (sl_jQuery(f).attr('class') != 'oceanus-content' && sl_jQuery(f).html() == d.innerHTML) { sl_jQuery(f).css('padding-right', sl_jQuery(d).css('padding-right')) } else { sl_jQuery(this).css('padding-right', sl_jQuery(d).css('padding-right')) } } if (sl_jQuery(d).css('padding-top') != 'undefined') { if (sl_jQuery(f).attr('class') != 'oceanus-content' && sl_jQuery(f).html() == d.innerHTML) { sl_jQuery(f).css('padding-top', sl_jQuery(d).css('padding-top')) } else { sl_jQuery(this).css('padding-top', sl_jQuery(d).css('padding-top')) } } if (sl_jQuery(d).css('padding-bottom') != 'undefined') { if (sl_jQuery(f).attr('class') != 'oceanus-content' && sl_jQuery(f).html() == d.innerHTML) { sl_jQuery(f).css('padding-bottom', sl_jQuery(d).css('padding-bottom')) } else { sl_jQuery(this).css('padding-bottom', sl_jQuery(d).css('padding-bottom')) } } } catch (e) { } } } this.src = this.src } else { this.parentNode.removeChild(this) } }); sl_jQuery('p:first', g).css('margin-top', '0') }, initializeNode: function (a) { a.oceanus = { "contentScore": 0 }; switch (a.tagName) { case 'DIV': a.oceanus.contentScore += 5; break; case 'PRE': case 'TD': case 'BLOCKQUOTE': a.oceanus.contentScore += 3; break; case 'ADDRESS': case 'OL': case 'UL': case 'DL': case 'DD': case 'DT': case 'LI': case 'FORM': a.oceanus.contentScore -= 3; break; case 'H1': case 'H2': case 'H3': case 'H4': case 'H5': case 'H6': case 'TH': a.oceanus.contentScore -= 5; break } a.oceanus.contentScore += oceanus.getClassWeight(a) }, grabArticles: function () { var a = []; var b = []; for (var c = 0; (node = oceanus.documentCopy.getElementsByTagName('*')[c]); c++) { var d = node.className + node.id; if (node.tagName !== "H1" && node.tagName !== "H2" && node.tagName !== "H3" && node.tagName !== "H4" && node.tagName !== "H5" && node.tagName !== "H6" && d.search(oceanus.regexps.unlikelyCandidatesRe) !== -1 && d.search(oceanus.regexps.maybeCandidateRe) == -1 && node.tagName !== "BODY" || (node.tagName == "A" && node.getAttribute('href') != null && node.getAttribute('href') !== 'undefined' && node.getAttribute('href').search(oceanus.regexps.unlikelyAdLinksRe) !== -1)) { if (node.tagName == "SPAN" && oceanus.getInnerText(node, true).length > 10 && document.title.indexOf(oceanus.getInnerText(node, true)) >= 0) { continue } node.parentNode.removeChild(node); c--; continue } if (node.tagName === "DIV") { if (node.className.search(oceanus.regexps.postRe) !== -1) { b.push(node) } else { if (node.innerHTML.search(oceanus.regexps.divToPElementsRe) === -1) { var f = document.createElement('p'); try { f.innerHTML = node.innerHTML; node.parentNode.replaceChild(f, node); c-- } catch (e) { debug("Could not alter div to p, probably an IE restriction, reverting back to div.") } } else if (node.innerHTML.search(oceanus.regexps.divToPElementsWithLinkRe) === -1) { var g = oceanus.getLinkDensity(node); if (g < 0.1) { var f = document.createElement('p'); try { f.innerHTML = node.innerHTML; node.parentNode.replaceChild(f, node); c-- } catch (e) { debug("Could not alter div to p, probably an IE restriction, reverting back to div.") } } } } } } if (b.length > 0) { for (var h = 0; h < b.length; ++h) { if (b[h].parentNode != null && b[h].parentNode !== 'undefined') { b[h].parentNode.removeChild(b[h]); var j = oceanus.scoreAndGetTopCandidate(b[h]); if (j != null && j !== 'undefined') { var k = null; var l = null; for (var m = 1; m < 7; ++m) { k = b[h].getElementsByTagName('h' + m)[0]; if (k != null && k !== 'undefined') { break } } if (k != null && k !== 'undefined') { l = document.createElement('h2'); l.className = "oceanus-title"; l.innerHTML = oceanus.getInnerText(k, true); var n = true; var o = getHeaderLink(k, oceanus.getInnerText(k, true)); if (o != null && o != 'undefined') { var p = document.createElement('a'); p.href = o; p.appendChild(l); l = p; n = false } if (n) { var q = k; while (q.parentNode != null && q.parentNode != 'undefined') { if (q.parentNode.nodeName == "A") { var p = document.createElement('a'); p.href = q.parentNode.href; p.appendChild(l); l = p; break } q = q.parentNode } } } var r = []; r = j.getElementsByTagName('img'); var s = []; for (var t = 0, postImgElements = b[h].getElementsByTagName('img'); t < postImgElements.length; ++t) { if (postImgElements[t] != null && postImgElements[t] != "" && postImgElements[t].src.length > 5) { var u = new Image; u.src = postImgElements[t].src; if (u.width > 80 && u.height > 80 && (u.height > 109 || u.width > 109)) { postImgElements[t].setAttribute("width", ""); postImgElements[t].setAttribute("height", ""); postImgElements[t].setAttribute("data-src", ""); var v = false; for (var w = 0; w < r.length; ++w) { if (r[w].src == postImgElements[t].src) { v = true; break } } if (!v) { s.push(postImgElements[t]) } } } } var x = document.createElement("DIV"); x.className = oceanusPostCSSClassName; if (l != null && l !== 'undefined') { x.appendChild(l) } for (var y = 0; y < s.length; ++y) { x.appendChild(s[y]) } x.appendChild(j); if (x.getElementsByTagName('img').length == 1) { x.getElementsByTagName('img')[0].setAttribute("class", "oceanus-post-img") } a.push(x) } } } } var z = oceanus.scoreAndGetTopCandidate(oceanus.documentCopy); if (z == null || z.tagName == "BODY") { } if (z != null && z !== 'undefined') { var A = document.createElement("DIV"); A.className = "oceanus-content"; A.appendChild(oceanus.getArticleTitle()); var B = Math.max(10, z.oceanus.contentScore * 0.2); var C = z.parentNode.childNodes; for (var i = 0, il = C.length; i < il; i++) { var D = C[i]; var E = false; debug("Looking at sibling node: " + D + " (" + D.className + ":" + D.id + ")" + ((typeof D.oceanus != 'undefined') ? (" with score " + D.oceanus.contentScore) : '')); debug("Sibling has score " + (D.oceanus ? D.oceanus.contentScore : 'Unknown')); if (D === z) { E = true } if (typeof D.oceanus != 'undefined' && D.oceanus.contentScore >= B) { E = true } if (D.nodeName == "P") { var g = oceanus.getLinkDensity(D); var F = oceanus.getInnerText(D); var G = F.length; if (G > 80 && g < 0.25) { E = true } else if (G < 80 && g == 0 && F.search(/\.( |$)/) !== -1) { E = true } } if (E) { debug("Appending node: " + D); A.appendChild(D); i--; il-- } } a.push(A) } for (var i = 0; i < a.length; ++i) { oceanus.prepArticle(a[i]) } return a }, scoreAndGetTopCandidate: function (e) { var a = e.getElementsByTagName("p"); var b = []; var c = []; for (var j = 0; j < a.length; j++) { var d = a[j].parentNode; var f = null; if (d.className.search(oceanus.regexps.postRe) === -1) { f = d.parentNode } var g = oceanus.getInnerText(a[j]); if (g.length < 50) continue; if (typeof d.oceanus == 'undefined') { oceanus.initializeNode(d); b.push(d) } if (f != null && typeof f.oceanus == 'undefined') { oceanus.initializeNode(f); b.push(f) } var h = 0; h++; h += g.split(',').length; h += Math.min(Math.floor(g.length / 100), 3); d.oceanus.contentScore += h; var k = null; var l = null; if (c.indexOf(d) == -1) { c.push(d); if (d.getElementsByTagName("p").length > 1) { for (var z = 0; z < document.floatingParagraphs.length; z++) { var m = document.floatingParagraphs[z].parentNode; var n = null; if (m != null) { n = m.parentNode } if (d != null && m != null && d.innerHTML == m.innerHTML) { k = m } if (f != null && n != null && f.innerHTML == n.innerHTML) { l = n } } } } if (k != null && sl_jQuery(k).css('float') != 'undefined' && (sl_jQuery(k).css('float') == 'right' || sl_jQuery(k).css('float') == 'left')) { if (f != null) { f.removeChild(d) } } if (f != null) { f.oceanus.contentScore += h / 2; if (l != null && sl_jQuery(l).css('float') != 'undefined' && (sl_jQuery(l).css('float') == 'right' || sl_jQuery(l).css('float') == 'left')) { b.splice(b.indexOf(f, 1)) } } } var o = null; for (var i = 0, il = b.length; i < il; i++) { b[i].oceanus.contentScore = b[i].oceanus.contentScore * (1 - oceanus.getLinkDensity(b[i])); debug('Candidate: ' + b[i] + " (" + b[i].className + ":" + b[i].id + ") with score " + b[i].oceanus.contentScore); if (!o || b[i].oceanus.contentScore > o.oceanus.contentScore) { o = b[i] } } return o }, getInnerText: function (e, a) { var b = ""; a = (typeof a == 'undefined') ? true : a; if (navigator.appName == "Microsoft Internet Explorer") b = e.innerText.replace(oceanus.regexps.trimRe, ""); else b = e.textContent.replace(oceanus.regexps.trimRe, ""); if (a) return b.replace(oceanus.regexps.normalizeRe, " "); else return b }, getCharCount: function (e, s) { s = s || ","; return oceanus.getInnerText(e).split(s).length }, cleanStyles: function (e) { if (!e) return; var a = e.firstChild; if (typeof e.removeAttribute == 'function' && e.className != 'oceanus-paragraph' && e.className != 'oceanus-content' && e.className != 'oceanus-title' && e.className != 'oceanus-post-img') { e.removeAttribute('style'); e.removeAttribute('id'); e.removeAttribute('class') } e.removeAttribute('style'); e.removeAttribute('alt'); e.removeAttribute('title'); while (a != null) { if (a.nodeType == 1) { a.removeAttribute("style"); a.removeAttribute("id"); a.removeAttribute('alt'); a.removeAttribute('title'); if (a.className != "oceanus-paragraph" && a.className != "oceanus-content" && a.className != "oceanus-title" && a.className != "oceanus-post-img") { a.removeAttribute("class") } oceanus.cleanStyles(a) } a = a.nextSibling } }, getLinkDensity: function (e) { var a = e.getElementsByTagName("a"); var b = oceanus.getInnerText(e).length; var c = 0; for (var i = 0, il = a.length; i < il; i++) { c += oceanus.getInnerText(a[i]).length } return c / b }, getClassWeight: function (e) { var a = 0; if (e.className != "") { if (e.className.search(oceanus.regexps.negativeRe) !== -1) a -= 25; if (e.className.search(oceanus.regexps.positiveRe) !== -1) a += 25 } if (typeof (e.id) == 'string' && e.id != "") { if (e.id.search(oceanus.regexps.negativeRe) !== -1) a -= 25; if (e.id.search(oceanus.regexps.positiveRe) !== -1) a += 25 } return a }, killBreaks: function (e) { try { e.innerHTML = e.innerHTML.replace(oceanus.regexps.killBreaksRe, '<br />') } catch (e) { debug("KillBreaks failed - this is an IE bug. Ignoring.") } }, clean: function (e, a) { var b = e.getElementsByTagName(a); var c = (a == 'object' || a == 'embed'); for (var y = b.length - 1; y >= 0; y--) { if (c && b[y].innerHTML.search(oceanus.regexps.videoRe) !== -1) { continue } b[y].parentNode.removeChild(b[y]) } }, cleanConditionally: function (e, a, b) { var c = e.getElementsByTagName(a); var d = c.length; for (var i = d - 1; i >= 0; i--) { var f = oceanus.getClassWeight(c[i]); if (f < 0) { c[i].parentNode.removeChild(c[i]) } else if (oceanus.getCharCount(c[i], ',') < 10) { var p = c[i].getElementsByTagName("p").length; var g = c[i].getElementsByTagName("img").length; var h = c[i].getElementsByTagName("li").length - 100; var j = c[i].getElementsByTagName("input").length; var k = 0; var l = c[i].getElementsByTagName("embed"); for (var m = 0, il = l.length; m < il; m++) { if (l[m].src.search(oceanus.regexps.videoRe) == -1) { k++ } } var n = oceanus.getLinkDensity(c[i]); var o = oceanus.getInnerText(c[i]).length; var q = false; if (g > p && !b) { q = true } else if (h > p && a != "ul" && a != "ol") { q = true } else if (j > Math.floor(p / 3)) { q = true } else if (o < 25 && (g == 0 || g > 2)) { q = true } else if (f < 25 && n > .2 && !b) { q = true } else if (f < 25 && n > .5 && b) { q = true } else if (f >= 25 && n > .5) { q = true } else if ((k == 1 && o < 75) || k > 1) { q = true } if (q) { c[i].parentNode.removeChild(c[i]) } } } }, cleanHeaders: function (e) { for (var a = 1; a < 7; a++) { var b = e.getElementsByTagName('h' + a); for (var i = b.length - 1; i >= 0; i--) { if (oceanus.getClassWeight(b[i]) < 0 || oceanus.getLinkDensity(b[i]) > 0.33) { b[i].parentNode.removeChild(b[i]) } } } }, htmlspecialchars: function (s) { if (typeof (s) == "string") { s = s.replace(/&/g, "&amp;"); s = s.replace(/"/g, "&quot;"); s = s.replace(/'/g, "&#039;"); s = s.replace(/</g, "&lt;"); s = s.replace(/>/g, "&gt;") } return s } }; function getHeaderLink(a, b) { if (a.childNodes != null && a.childNodes != 'undefined') { for (var c = 0; c < a.childNodes.length; ++c) { if (a.childNodes[c].nodeName == "A" && oceanus.getInnerText(a.childNodes[c], true) == b) { return a.childNodes[c].href } else { var d = getHeaderLink(a.childNodes[c], b); if (d != null && d != 'undefined') { return d } } } } } var sl_domain = "http://www.pipfly.com"; var sl_logindomain = "http://www.pipfly.com"; var sl_articleFormDomain = sl_domain + "/article/cliparticleform"; var sl_dashboardDomain = sl_domain + "/webpage/boomarkletdashboard"; var sl_videoClipDomain = sl_domain + "/clip/GetClipVideoUI"; var sl_photoClipDomain = sl_domain + "/clip/GetClipPhotoUI"; var sl_LoginDomain = sl_domain + "/button/login"; var sl_bookmarkletCSS = "#sl_RemoveLink { position: fixed; z-index: 2147483646; right: 0; top: 0; left: 0; height: 24px; padding: 12px 0; text-align: center; font-weight: bold; } #sl_overlay { position: fixed; z-index: 2147483646; top: 0; right: 0; bottom: 0; left: 0; background-color: #000; height: 100%; width: 100%; opacity: .9; } #sl_container { font-family: 'helvetica neue' , arial, sans-serif; height: 100%; position: absolute; padding-top: 5px; z-index: 2147483646; top: 0; left: 0; right:0; bottom:0; background-color: transparent; width: 100%; opacity: 1; } #sl_snipheaderouter { margin: 0px auto 0px auto; width: 752px; position: fixed; left:0; right:0; top:1px; z-index: 2147483646; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; overflow: auto; border: 1px solid #D9D9D9; background-color: transparent; } #sl_snipheader { margin: 0px auto 0px auto; width: 740px; padding: 5px; z-index: 2147483646; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; overflow: auto; border: 1px solid #fff; background-color: transparent; } #sl_snipheader #sl_snipheadercontent { background-color:#fff; border: 1px solid #D9D9D9; padding:5px; display:block; overflow:auto; } #sl_snipheader #sl_snipheadercontent #sl_snipheadercontenttext { font-weight:bold; font-size:12px; width:528px; float:left; height:24px; line-height:24px; font-family: 'lucida grande' ,tahoma,verdana,arial,sans-serif; text-shadow: 2px 2px 5px #DDD; } #sl_snipheader #sl_snipheadercontent #sl_snipheadercontentbtn { width:200px; float:left; text-align:right; } #sl_container .sl_header { margin: 0px auto 0px auto; width: 940px; padding: 10px 10px 0 10px; -moz-border-radius-topleft: 10px; -webkit-border-top-left-radius: 10px; border-top-left-radius: 10px; -moz-border-radius-topright: 10px; -webkit-border-top-right-radius: 10px; border-top-right-radius: 10px; overflow: auto; border: solid #fff; border-width:1px 1px 0 1px; background-color: transparent; } #sl_container .sl_header .sl_session { width: 200px; height: 40px; padding:10px 0; position: relative; display: block; float: right; } #sl_userlogged, #sl_userlogged:hover { max-width: 200px; height: 20px; line-height: 20px; padding: 10px 0px; display: block; vertical-align: top; float: right; color: white; font-weight: bold; text-align: center; position: relative; } #sl_userlogged .sl_profileimg { margin-right: 6px; height: 20px; vertical-align: top; display: inline-block; } #sl_userlogged .sl_screenname { clear: both; line-height: 20px; height: 20px; font-size:12px; color:#555; font-weight: bold; display: inline-block; } #sl_iframecontent, #sl_sharelinkcontent, #sl_addphotoclipform, #sl_articleformiframe { height: 100%; margin:0px auto; width:960px; padding:0; overflow:auto; z-index: 2147483646; } #sl_photoselectform, #sl_addphotoclipform, #sl_sharelinkform, #sl_articleformiframe { background-color: transparent; margin: 0px auto; width: 940px; padding:0px 10px 10px 10px; overflow: hidden; border:solid #fff; border-width:0 1px 1px 1px; -moz-border-radius-bottomleft: 10px; -webkit-border-bottom-left-radius: 10px; border-bottom-left-radius: 10px; -moz-border-radius-bottomright: 10px; -webkit-border-bottom-right-radius: 10px; border-bottom-right-radius: 10px; } #sl_photoselect, #sl_videoselect, #sl_articleselect { margin: 0px auto; width: 940px; padding:0px 10px 10px 10px; background-color:transparent; overflow: hidden; border:solid #fff; border-width:0 1px 1px 1px; -moz-border-radius-bottomleft: 10px; -webkit-border-bottom-left-radius: 10px; border-bottom-left-radius: 10px; -moz-border-radius-bottomright: 10px; -webkit-border-bottom-right-radius: 10px; border-bottom-right-radius: 10px; z-index:2147483646; } #bookmarkpagediscusscontainer .page { min-height: 100%; height: 100%; position: relative; display: block; margin: 0 auto; width:940px; padding:0 10px 10px 10px; border: solid #fff; border-width:0 1px 1px 1px; -moz-border-radius-bottomleft: 10px; -webkit-border-bottom-left-radius: 10px; border-bottom-left-radius: 10px; -moz-border-radius-bottomright: 10px; -webkit-border-bottom-right-radius: 10px; border-bottom-right-radius: 10px; }  #bookmarkpagediscusscontainer .maincontentsect { background-color: #fff; margin: 0px auto; padding:10px 0; width: 940px; overflow: hidden; }  #sl_photoselecttitle { color: #444; font-size: 22px; line-height:22px; font-weight:normal; letter-spacing:1px; padding:10px; font-family: 'Rancho', cursive; border-top:1px solid #fff; border-bottom: 1px solid #D9D9D9; width:920px; overflow:auto; margin:0 auto; display:block; background-color:#f9f9f9; text-align:center; clear:both; text-shadow: 0 -1px rgba(34, 25, 25, 0.3); }  #sl_photoselect_middle { width:940px; overflow:auto; margin:0 auto; display:block; background-color:#fff; clear:both; }  #sl_articleselecttitle { color: #444; font-size: 22px; line-height:22px; font-weight:normal; letter-spacing:1px; padding:10px; font-family: 'Rancho', cursive; border-top:1px solid #fff; border-bottom: 1px solid #D9D9D9; width:920px; overflow:auto; margin:0 auto; display:block; background-color:#f9f9f9; text-align:center; clear:both; text-shadow: 0 -1px rgba(34, 25, 25, 0.3); }  #sl_articleselect_middle { width:940px; overflow:auto; margin:0 auto; display:block; background-color:#fff; clear:both; text-align:left; }  #sl_container .sl_menu { display:block; overflow:auto; padding:10px; height:60px; position:relative; background-color:#F9F9F9; border-bottom:1px solid #d9d9d9; }  #sl_container .sl_logo { height:60px; margin:0 10px; display:block; float:left; width:115px; }  #sl_container .sl_logo img { border:none; }  #sl_container .sl_menubtns { padding:0; margin:0; border:none; width:540px; position:absolute; overflow:auto; height:60px; left:190px; }  #sl_container .pageprofile { margin: 10px auto 0 auto; width: 920px; padding: 10px; overflow: auto; background-color: #f5f5f5; }  .sl_photo_select_cont { position: relative; padding: 0; margin: 0; float: left; background-color: white; border: solid #d9d9d9; background-color:#fff; height: 234px; width: 234px; z-index: 2147483646; text-align: center; border-width: 0 1px 1px 0; overflow:hidden; }  .sl_photo_select_cont a, .sl_photo_select_cont a:hover, .sl_photo_select_cont a:visited, .sl_photo_select_cont a:active { text-decoration:none; }  .sl_photo_select_cont .sl_photo_select_img { max-height: 234px; max-width: 234px; width: auto !important; height: auto !important; }  .sl_photo_select_cont .sl_photo_select_img_caption, .sl_photo_select_cont .sl_photo_select_img_caption:hover { position: absolute; bottom: 15px; left:0; right:0; width:70px; color:#444; margin: 0 auto; text-decoration:none; text-align: center; font-size: 10px; z-index:2147483647; background: white; border-radius: 4px; padding: 0 2px; }  .statpaddingleft { padding-left: 15px; }  .pageprofile .pageinfo { text-align: left; overflow: auto; }  .pageprofile .pageinfo .name { font-size: 16px; text-align: left; font-weight: bold; color: #606060; text-shadow: 2px 2px 5px #DDD; }  .pageprofile .pageinfo .url { font-size: 12px; text-align: left; padding-top: 5px; color: #888; font-weight: normal; }  .maincontentsect .discussionsect { width: 570px; padding: 20px; border-right: 1px solid #d9d9d9; margin-right: 20px; text-align: left; float: left; overflow: hidden; }  .maincontentsect .othercontentsect { float: left; width: 290px; padding:10px 10px 15px 0; }  #sl_container .sl_menubtns .sl_btn img, #sl_container .sl_menubtns .closebtn img { margin:0; padding:0; clear:both; }  #sl_container .sl_menubtns .sl_btn, #sl_container .sl_menubtns .sl_btn:link, #sl_container .sl_menubtns .sl_btn:active, #sl_container .sl_menubtns .sl_btn:visited, #sl_container .sl_menubtns .sl_btn:hover, #sl_container .sl_menubtns .closebtn, #sl_container .sl_menubtns .closebtn:link, #sl_container .sl_menubtns .closebtn:active, #sl_container .sl_menubtns .closebtn:visited, #sl_container .sl_menubtns .closebtn:hover { font-family: Helvetica, Arial, Verdana, sans-serif; letter-spacing:normal; font-size: 12px; width: 94px; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; padding: 0 3px; margin:0; line-height:16px; border:none !important; float: left; color: #606060; text-decoration:none; text-align: center; font-weight:bold; text-shadow: 2px 2px 2px #ddd; cursor:pointer; background-color:transparent; }  #sl_container .sl_menubtns .closebtn, #sl_container .sl_menubtns .closebtn:link, #sl_container .sl_menubtns .closebtn:active, #sl_container .sl_menubtns .closebtn:visited { margin-left:20px; padding-left:20px; border-left:1px solid #d9d9d9; }  .maincontentsect .graytext { color:#aaa; background-color:transparent; }  #sl_container .sl_menubtns .sl_btn:hover { color:#106fb8; background-color:transparent; text-shadow: 2px 2px 5px #DDD; }  /** BUTTON / EMPTY TEXT STYLES **/ .btnredstyle, .btnredstyle:link, .btnredstyle:hover, .btnredstyle:visited, .btnstyle, .btnstyle:link, .btnstyle:hover, .btnstyle:visited, .btnundo, .btnundo:link, .btnundo:hover, .btnundo:visited, .btnbluestyle, .btnbluestyle:link, .btnbluestyle:hover, .btnbluestyle:visited, .btngreenstyle, .btngreenstyle:link, btngreenstyle:hover, btngreenstyle:visited, .btnyellowstyle, .btnyellowstyle:link, .btnyellowstyle:hover, .btnyellowstyle:visited, .disabledbtn, .disabledbtn:link, .disabledbtn:hover, .disabledbtn:hover:active, .disabledbtn:visited { -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; font-family: 'lucida grande' ,tahoma,verdana,arial,sans-serif; font-variant: normal; padding: 4px 5px; cursor: pointer; font-style:normal; box-shadow: 0 1px 2px #d9d9d9; -webkit-box-shadow: 0 1px 2px #d9d9d9; position: relative; text-align: center; font-weight: bold; font-size: 12px; line-height: normal !important; white-space: nowrap; border: 1px solid #aaa; display: inline-block; text-decoration: none; vertical-align: middle; }  .btnstyle .imgleft { padding-right: 5px; position: relative; top: 1px; }  .btnundo, .btnundo:visited, .disabledbtn { color: #444; font-weight: normal; border: 1px solid #d9d9d9; background-color: #e9e9e9; }  .disabledbtn, .disabledbtn:hover, .disabledbtn:active, .disabledbtn:visited { font-style:italic; cursor:default; color:#444; }  .btnundo:hover { color: #fff; font-weight: normal; background-color: #a9a9a9; border: 1px solid #aaa; text-decoration: none; }  .btnstyle, .btnstyle:link, .btnstyle:visited, .uploadifyButton, .uploadifyButton:visited { color: #444; background: url('../images/sitetheme/btn_gray_background.png'); }  .btnstyle:hover, .uploadifyButton:hover { color: #106fb8; text-decoration: none; }  .btngreenstyle, .btngreenstyle:link, .btngreenstyle:visited, .btngreenstyle:hover { background: #698B22; background: -webkit-gradient(linear,left top,left bottom,from(#9ACD32),to(#698B22)); background: -moz-linear-gradient(top,#9ACD32,#698B22); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#9ACD32',endColorstr='#698B22'); border: 1px solid #698B22; box-shadow: 0 1px 2px #f0f0f0; text-decoration:none; -webkit-box-shadow: 0 1px 2px #f0f0f0; color: #fff; }  .btnredstyle, .btnredstyle:link, .btnredstyle:visited, .btnredstyle:hover { background: #106fb8; background: -webkit-gradient(linear,left top,left bottom,from(#EE30A7),to(#CD2990)); background: -moz-linear-gradient(top,#EE30A7,#CD2990); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#EE30A7',endColorstr='#CD2990'); border: 1px solid #CD2990; box-shadow: 0 1px 2px #f0f0f0; -webkit-box-shadow: 0 1px 2px #f0f0f0; color: #fff; }  .btnbluestyle, .btnbluestyle:link, .btnbluestyle:visited { background: #106fb8; background: -webkit-gradient(linear,left top,left bottom,from(#0296E8),to(#106fb8)); background: -moz-linear-gradient(top,#0296E8,#106fb8); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0296E8',endColorstr='#106fb8'); border: 1px solid #106fb8; box-shadow: 0 1px 2px #f0f0f0; -webkit-box-shadow: 0 1px 2px #f0f0f0; color: #fff; }  .btnbluestyle:hover { color: #fff; text-decoration: none; background: #106fb8; background: -webkit-gradient(linear,left top,left bottom,from(#0296E8),to(#106fb8)); background: -moz-linear-gradient(top,#0296E8,#106fb8); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0296E8',endColorstr='#106fb8'); box-shadow: 0 1px 2px #f0f0f0; -webkit-box-shadow: 0 1px 2px #f0f0f0; border: 1px solid #888; }  .btnyellowstyle, .btnyellowstyle:link, .btnyellowstyle:visited, .btnyellowstyle:hover { background: #FFB72E; background: -webkit-gradient(linear,left top,left bottom,from(#FFEE66),to(#FFB72E)); background: -moz-linear-gradient(top,#FFEE66,#FFB72E); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEE66',endColorstr='#FFB72E'); border: 1px solid #FFAA22; box-shadow: 0 1px 2px #f0f0f0; -webkit-box-shadow: 0 1px 2px #f0f0f0; text-shadow: 0 1px 0 #FE6; color: #444; }  .emptytextstyle { color: #888; font-family: 'lucida grande' ,tahoma,verdana,arial,sans-serif; font-weight:normal; }  .oceanus-content { padding:10px; margin:0 10px; border-bottom:1px double #d9d9d9; border-bottom-width:3px; clear:both; overflow:auto; color:#444; font-size:14px; font-weight:normal; font-family: 'lucida grande' ,tahoma,verdana,arial,sans-serif; text-shadow:none; font-style:normal; font-variant:normal; }  .oceanus-content a:link, .oceanus-content a:active, .oceanus-content a:visited, .oceanus-content a:hover, .oceanus-content a { font-size:14px; font-weight:normal; font-family: 'lucida grande' ,tahoma,verdana,arial,sans-serif; text-shadow:none; font-style:normal; font-variant:normal; color: #106fb8; margin-left:10px; }  .oceanus-content p, .oceanus-content span { font-size:14px; line-height:20px; font-weight:normal; font-family: 'lucida grande' ,tahoma,verdana,arial,sans-serif; text-shadow:none; font-style:normal; color:#444; font-variant:normal; margin:14px 0; }  .oceanus-content img { text-align:center; margin:0 auto; margin-right:10px; margin-bottom:10px; background:#fff; }  .oceanus-content .oceanus-post-img { clear:both; float:left; margin-right:10px; margin-bottom:10px; background:#fff; }  .oceanus-content .oceanus-title { text-align:left; color:#444; font-size:18px; line-height:22px; font-weight:bold; padding-bottom:10px; margin:0; font-style:normal; font-variant:normal; }  .oceanus-content h3, .oceanus-content h4, .oceanus-content h5, .oceanus-content h6 { font-size:14px; line-height:16px; font-weight:bold; }  .oceanus-content-link, .oceanus-content-link:hover, .oceanus-content-link:link, .oceanus-content-link:active { float:right; background: #106fb8; background: -webkit-gradient(linear,left top,left bottom,from(#0296E8),to(#106fb8)); background: -moz-linear-gradient(top,#0296E8,#106fb8); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0296E8',endColorstr='#106fb8'); border: 1px solid #106fb8; box-shadow: 0 1px 2px #f0f0f0; -webkit-box-shadow: 0 1px 2px #f0f0f0; color:#fff; font-size:16px; padding:3px 6px; font-weight:bold; -moz-border-radius: 4px; -webkit-border-radius: 4px; border-radius: 4px; font-weight:bold; }"; var sl_clipphotoformContainer; var sl_sharelinkContainer; var createScrapbookSectionEmptyText = "Type a new scrapbook section here..."; var describeClipEmptyText = "Say something about the photo..."; var shareLinkRecipientEmptyText = "Type the name of your friends here..."; var sl_jQuery = null; var sl_reloadDiscussion = true; function removejscssfile(a, b) { var c = (b == "js") ? "script" : (b == "css") ? "link" : "none"; var d = (b == "js") ? "src" : (b == "css") ? "href" : "none"; var e = document.getElementsByTagName(c); for (var i = e.length; i >= 0; i--) { if (e[i] && e[i].getAttribute(d) != null && e[i].getAttribute(d).indexOf(a) != -1) e[i].parentNode.removeChild(e[i]) } jQuery = document.oldJquery; if (document.forms['sl_loadwebpageform'] != 'undefined' && document.forms['sl_loadwebpageform'] != null) { document.body.removeChild(document.forms['sl_loadwebpageform']) } if (document.forms['sl_articleform'] != 'undefined' && document.forms['sl_articleform'] != null) { document.body.removeChild(document.forms['sl_articleform']) } if (document.forms['sl_loadvideoclipform'] != 'undefined' && document.forms['sl_loadvideoclipform'] != null) { document.body.removeChild(document.forms['sl_loadvideoclipform']) } if (document.forms['sl_loadphotoclipform'] != 'undefined' && document.forms['sl_loadphotoclipform'] != null) { document.body.removeChild(document.forms['sl_loadphotoclipform']) } } function sl_loadJQuery() { var s = document.createElement('script'); s.setAttribute("type", "text/javascript"); s.setAttribute("src", sl_domain + "/scripts/plugins/jquery-1.7.1.min.js"); if (typeof s.readyState === 'undefined') { s.onload = function () { sl_LoadPostMessages() } } else { s.onreadystatechange = function () { if (s.readyState === "loaded" || s.readyState === "complete") { s.onreadystatechange = null; sl_LoadPostMessages() } } }; document.body.appendChild(s) } function sl_LoadPostMessages() { var s = document.createElement('script'); s.setAttribute("type", "text/javascript"); s.setAttribute("src", sl_domain + "/scripts/plugins/jquery.postmessages.js"); if (typeof s.readyState === 'undefined') { s.onload = function () { sl_jQuery = jQuery.noConflict(true); sl_initPipfly() } } else { s.onreadystatechange = function () { if (s.readyState === "loaded" || s.readyState === "complete") { s.onreadystatechange = null; sl_jQuery = jQuery.noConflict(true); sl_initPipfly() } } }; document.body.appendChild(s) } function sl_initPipfly() { sl_jQuery.receiveMessage(function (e) { if (e.data.indexOf('if_height') >= 0) { var h = Number(e.data.replace(/.*if_height=(\d+)(?:&|$)/, '$1')); if (!isNaN(h) && h > 0) { if (showingArticleClip) { var a = document.getElementById('sl_articleformiframe'); sl_jQuery(a).css("height", h + 'px') } } } else if (e.data.indexOf('sl_login') >= 0) { var h = Number(e.data.replace(/.*sl_login=(\d+)(?:&|$)/, '$1')); if (h == 1) { sl_checkIfUserLoggedIn() } } }, sl_domain); sl_loadSLBookmarklet() } (function () { if (window.location.href == 'undefined' || window.location.href == null || window.location.href == 'about:blank' || window.location.href == '') { alert("We're sorry but an error occured in trying to load the pipfly bookmarklet."); return } if (!document.sl_bookmarkletLoaded) { document.sl_bookmarkletLoaded = 1; var s = document.createElement('link'); s.setAttribute("href", "http://fonts.googleapis.com/css?family=Rancho"); s.setAttribute("rel", "stylesheet"); s.setAttribute("type", "text/css"); document.body.appendChild(s); sl_loadJQuery() } })(); function sl_closePipfly() { sl_jQuery('#sl_overlay').remove(); sl_jQuery('#sl_container').remove(); removejscssfile(sl_domain + "/scripts/pipfly.marklet.js", "js"); removejscssfile(sl_domain + "/scripts/plugins/jquery-1.7.1.min.js", "js"); removejscssfile(sl_domain + "/scripts/plugins/jquery.postmessages.js", "js"); removejscssfile("http://fonts.googleapis.com/css?family=Rancho", "css"); document.sl_bookmarkletLoaded = 0; document.sl_number = 0; return false } function sl_checkIfUserLoggedIn() { var d = sl_domain + "/account/IsUserLoggedIn"; sl_jQuery.ajax({ url: d, dataType: "jsonp", timeout: 5000, success: function (a, b) { if (a.successful == "true") { sl_loadBookmarkletContents(a.fullname, a.profileimageurl) } else { sl_showBookmarkletLogin() } }, error: function (a, b, c) { } }) } function sl_showBookmarkletLogin() { var n = document.getElementById("sl_container"); n.innerHTML = '<div class="sl_header" style="width:320px;"><div class="sl_menu" style="width:300px;"><div class="sl_logo"><img style="display:inline;border:none;padding:0;margin:0;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:108px;height:auto;float:none;" src="' + sl_domain + '/images/sitetheme/pipfly_logo_sm.png" alt /></div><div class="sl_menubtns" style="left:auto;right:10px;width:140px;"><a class="closebtn" href="#" onclick="javascript:sl_closePipfly();return false;"><img style="float:none;border:none;padding:0;margin:0;clear:both;display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:40px;height:40px;" src="' + sl_domain + '/images/bookmarklet/close.png" /><br />Close pipfly</a></div></div></div>'; sl_showPipflyLogin(); window.scroll(0, 0) } function sl_loadBookmarkletContents(a, b) { var n = document.getElementById("sl_container"); n.innerHTML = '<div class="sl_header"><div class="sl_menu"><div class="sl_logo"><img style="display:inline;border:none;padding:0;margin:0;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:108px;height:auto;float:none;" src="' + sl_domain + '/images/sitetheme/pipfly_logo_sm.png" alt /></div><div class="sl_menubtns"><a href="#" class="sl_btn" onclick="javascript: sl_showDiscussion();"><img style="float:none;border:none;padding:0;margin:0;clear:both;display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:40px;height:40px;" src="' + sl_domain + '/images/bookmarklet/dashboard.png" /><br />Dashboard</a><a href="#" class="sl_btn" onclick="javascript:sl_showArticleClipUI();return false;"><img style="float:none;border:none;padding:0;margin:0;clear:both;display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:40px;height:40px;" src="' + sl_domain + '/images/bookmarklet/story.png" /><br />Clip Article</a><a class="sl_btn" href="#" onclick="javascript:sl_showPhotoSelect();return false;"><img style="float:none;border:none;padding:0;margin:0;clear:both;display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:40px;height:40px;" src="' + sl_domain + '/images/bookmarklet/photo.png" /><br />Clip Photo</a><a class="sl_btn" href="#" onclick="javascript:sl_showVideoSelect();return false;"><img style="float:none;border:none;padding:0;margin:0;clear:both;display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:40px;height:40px;" src="' + sl_domain + '/images/bookmarklet/video.png" /><br />Clip Video</a><a class="closebtn" href="#" onclick="javascript:sl_closePipfly();return false;"><img style="float:none;border:none;padding:0;margin:0;clear:both;display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;width:40px;height:40px;" src="' + sl_domain + '/images/bookmarklet/close.png" /><br />Close pipfly</a></div><div class="sl_session"><a id="sl_userlogged"><img src="' + b + '" alt="" style="display:inline;box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;height:20px;" class="sl_profileimg"><span class="sl_screenname">' + a + '</span></a></div></div></div>'; sl_reloadDiscussion = true; sl_showDiscussion(); window.scroll(0, 0) } function sl_loadSLBookmarklet() { adjustEmbedObjs(); try { oceanus.init() } catch (e) { } var f = document.createElement("style"); f.setAttribute("type", "text/css"); if (f.styleSheet) { f.styleSheet.cssText = sl_bookmarkletCSS } else { f.innerHTML = sl_bookmarkletCSS } document.getElementsByTagName('head')[0].appendChild(f); var a = document.createElement("div"); a.setAttribute("id", "sl_overlay"); document.body.appendChild(a); var n = document.createElement("div"); n.setAttribute("id", "sl_container"); document.body.appendChild(n); sl_jQuery('#sl_overlay').height(document.height); sl_checkIfUserLoggedIn(); scroll(0, 0) } function adjustYouTubeContainer(g) { if (g.src && g.src != "") { var j = g.src.indexOf("?") > -1 ? "&" : "?"; g.src += j + "autoplay=0"; g.src += "&wmode=transparent" } g.setAttribute("wmode", "transparent"); j = g.parentNode; var r = g.nextSibling; j.removeChild(g); j.insertBefore(g, r) } function adjustEmbedObjs() { var a = null; var b = document.getElementsByTagName("iframe"); for (k = 0; k < b.length; k++) { a = /^http:\/\/www\.youtube\.com\/embed\/([a-zA-Z0-9\-_]+)/; if (a = a.exec(b[k].src)) { adjustYouTubeContainer(b[k]) } } var c = document.getElementsByTagName("embed"); for (k = 0; k < c.length; k++) { a = /^http:\/\/www\.youtube\.com\/v\/([a-zA-Z0-9\-_]+)/; if (a = a.exec(c[k].src)) { adjustYouTubeContainer(c[k]) } } a = /^http:\/\/www\.youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/; if (a = a.exec(window.location.href)) { adjustYouTubeContainer(document.getElementById("movie_player")) } } function sl_showVideoSelect() { showingArticleClip = false; var a = []; var b = []; function youTubeImg(g) { var j = new Image; j.height = 360; j.width = 480; j.src = "http://img.youtube.com/vi/" + g + "/0.jpg"; return j } var c = null; var d = document.getElementsByTagName("iframe"); for (k = 0; k < d.length; k++) { c = /^http:\/\/www\.youtube\.com\/embed\/([a-zA-Z0-9\-_]+)/; if (c = c.exec(d[k].src)) { a.push(youTubeImg(c[1])); b.push(c[1]) } } var e = document.getElementsByTagName("embed"); for (k = 0; k < e.length; k++) { c = /^http:\/\/www\.youtube\.com\/v\/([a-zA-Z0-9\-_]+)/; if (c = c.exec(e[k].src)) { a.push(youTubeImg(c[1])); b.push(c[1]) } } c = /^http:\/\/www\.youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/; if (c = c.exec(window.location.href)) { a.push(youTubeImg(c[1])); b.push(c[1]) } if (a.length == 0) { window.alert("Sorry, we can't find any supported videos on this page.") } else { sl_showVideoClipUI(a, b) } return false } function sl_showPhotoSelect() { showingArticleClip = false; var e = []; var i = {}; for (k = 0; k < document.images.length; k++) { var f = document.images[k]; if (f.style.display != "none") { f = { width: f.width, height: f.height, src: f.src }; if (f.width > 80 && f.height > 80 && (f.height > 109 || f.width > 109)) { var g = new Image; g.src = f.src; if (!(g.height && g.height < 80) && !i[f.src]) { i[f.src] = 1; e.push(f) } } } } sl_jQuery('li:visible').each(function (a) { if (sl_jQuery(this).css('background-image') != null && sl_jQuery(this).css('background-image') != "none") { var b = sl_jQuery(this).css('background-image').replace(/"/g, "").replace(/url\(|\)$/ig, ""); if (b != null && b != "" && b.substring(0, 5) == "http:") { var c = new Image; c.src = b; var d = { width: c.width, height: c.height, src: b }; if (d.width > 80 && d.height > 80 && (d.height > 109 || d.width > 109) && !i[d.src]) { i[d.src] = 1; e.push(d) } } } }); if (e.length == 0) { window.alert("Sorry, we can't find any large images on this page.") } else { sl_showPhotoClipUI(e) } return false } function sl_getPageDescription() { var a; var b = document.getElementsByTagName('meta'); for (var x = 0, y = b.length; x < y; x++) { if (b[x].name.toLowerCase() == "description" || b[x].name.toLowerCase() == "og:description") { a = b[x].getAttribute('content'); break } } return a } function sl_showArticleClipForm(a) { var b; var c; if ((b = document.getElementById('sl_articleformiframe')) != null) { b.parentNode.removeChild(b); b = null } if ((c = document.getElementById('sl_articleform')) != null) { c.parentNode.removeChild(c); c = null } b = document.createElement("iframe"); b.setAttribute("id", "sl_articleformiframe"); b.setAttribute("name", "sl_articleformiframe"); b.setAttribute("allowtransparency", "true"); b.setAttribute("frameborder", "0"); b.setAttribute("style", "width:962px;clear:both;border:none;display:block;padding: 0 !important;margin:0 auto !important;"); b.setAttribute("scrolling", "no"); document.getElementById('sl_container').appendChild(b); var d = document.articles[a].cloneNode(true); var e = d.getElementsByTagName('img'); for (i = e.length - 1; i >= 0; i--) { var f = new Image; f.src = e[i].src; e[i].removeAttribute('width'); e[i].removeAttribute('height'); if (f.width > 0) { sl_jQuery(e[i]).css('width', f.width) } if (f.height > 0) { sl_jQuery(e[i]).css('height', f.height) } } var g = document.createElement("div"); g.appendChild(d); var h = ""; var j = d.getElementsByTagName('h2'); if (j != null && j != 'undefined') { h = oceanus.getInnerText(j[0], true) } var k = oceanus.getInnerText(d, true); showingArticleClip = true; showingPhotoClip = false; showingVideoClip = false; var l = d.cloneNode(true); l = generateShortFormArticleMarkup(l); var m = document.createElement("div"); m.appendChild(l); var n = '<form id="sl_articleform" style="display: none;" target="sl_articleformiframe" method="post" action="' + sl_articleFormDomain + '">		                <input type="hidden" name="articleMarkup" id="bodyContentMarkup" value="' + oceanus.htmlspecialchars(g.innerHTML) + '" />		                <input type="hidden" name="shortArticleMarkup" id="bodyContentMarkup" value="' + oceanus.htmlspecialchars(m.innerHTML) + '" />		                <input type="hidden" name="articleText" id="bodyContentText" value="' + oceanus.htmlspecialchars(k) + '" />		                <input type="hidden" name="articleTitle" id="bodyContentTitle" value="' + oceanus.htmlspecialchars(h) + '" />						<input type="hidden" name="pageUrl" id="pageUrl" value="' + oceanus.htmlspecialchars(window.location.href) + '" />						<input type="hidden" name="pageTitle" id="pageTitle" value="' + oceanus.htmlspecialchars(document.title) + '" />						<input type="hidden" name="pageDescription" id="pageDescription" value="' + oceanus.htmlspecialchars(sl_getPageDescription()) + '" />                    </form>'; sl_reloadDiscussion = true; document.body.innerHTML += n; document.forms['sl_articleform'].submit(); document.getElementById("sl_iframecontent").style.display = "none"; if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "none" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "none" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } b.style.display = "block" } function generateShortFormArticleMarkup(a) { var b = 0; sl_jQuery('img', a).each(function () { ++b; if (b > 1) { sl_jQuery(this).remove() } else { sl_jQuery(this).css('min-height', 'auto'); sl_jQuery(this).css('min-width', 'auto') } }); sl_jQuery('table', this).each(function () { sl_jQuery(this).remove() }); var c = oceanus.getInnerText(a, false); var d = c.length * 0.5; if (d > 600) { d = 600 } var e = null; while (c.length > d && e != a.innerHTML) { e = a.innerHTML; trimArticleContents(a, this, null); c = oceanus.getInnerText(a, false) } var f = /(<hr[^>]*>[ \n\r\t]*){1,}/gi; a.innerHTML = a.innerHTML.replace(f, ''); return a } function trimArticleContents(a, b, c) { var d = null; var e = sl_jQuery('p, span, div, h3, h4, h5, h6', a); if (e.length <= 0) { d = a } else { d = e[e.length - 1]; if (sl_jQuery.trim(d.innerHTML) == "") { d.parentNode.removeChild(d); trimArticleContents(a, b, c); return } } for (var i = d.childNodes.length - 1; i >= 0; i--) { var f = d.childNodes[i]; if (f.nodeType == Node.TEXT_NODE) { if (c == 'undefined' || c == null || c <= 0) { var g = f.nodeValue; if (sl_jQuery.trim(g) == "" || sl_jQuery.trim(g) == "...") { f.parentNode.removeChild(f) } else { g = g.replace(/\s*\S+\s*$/, "..."); f.nodeValue = g; break } } else { while (c > 0 && sl_jQuery(b).height() > c) { var g = f.nodeValue; if (sl_jQuery.trim(g) == "" || sl_jQuery.trim(g) == "...") { f.parentNode.removeChild(f); break } else { g = g.replace(/\s*\S+\s*$/, "..."); f.nodeValue = g } } if (sl_jQuery(b).height() < c) { break } } } else { if (f.innerHTML == "") { f.parentNode.removeChild(f) } else { trimArticleContents(f, b, c); break } } } if (sl_jQuery.trim(d.innerHTML) == "") { d.parentNode.removeChild(d) } } function sl_showShareLinkForm() { var a = sl_getPageDescription(); if ((sl_sharelinkContainer = document.getElementById('sl_sharelinkcontent')) == null) { sl_sharelinkContainer = document.createElement("iframe"); sl_sharelinkContainer.setAttribute("id", "sl_sharelinkcontent"); sl_sharelinkContainer.setAttribute("allowtransparency", "true"); sl_sharelinkContainer.setAttribute("frameborder", "0"); sl_sharelinkContainer.setAttribute("style", "width:962px;clear:both;border:none;display:block;padding: 0 !important;margin:0 auto !important;"); sl_sharelinkContainer.setAttribute("src", sl_domain + "/webpage/GetShareLinkUI?pageUrl=" + encodeURIComponent(window.location.href) + "&pageTitle=" + encodeURIComponent(document.title) + "&pageDescription=" + encodeURIComponent(a)); document.getElementById('sl_container').appendChild(sl_sharelinkContainer) } sl_sharelinkContainer.style.display = "block"; document.getElementById("sl_iframecontent").style.display = "none"; if (sl_jQuery('#sl_articleformiframe') != null) { sl_jQuery('#sl_articleformiframe').remove() } if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "none" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "none" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } } function sl_showVideoClipAddForm(a, b, c, d) { if (sl_jQuery('#sl_videoselect') != null) { sl_jQuery('#sl_videoselect').hide() } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } if (document.forms['sl_loadvideoclipform'] != 'undefined' && document.forms['sl_loadvideoclipform'] != null) { document.body.removeChild(document.forms['sl_loadvideoclipform']) } var e = document.createElement("iframe"); e.setAttribute("id", "sl_addphotoclipform"); e.setAttribute("allowtransparency", "true"); e.setAttribute("frameborder", "0"); e.setAttribute("style", "width:962px;clear:both;border:none;display:block;padding: 0 !important;margin:0 auto !important;"); document.getElementById('sl_container').appendChild(e); var f = '<form id="sl_loadvideoclipform" style="display: none;" target="sl_addphotoclipform" method="post" action="' + sl_videoClipDomain + '">						<input type="hidden" name="pageUrl" id="pageUrl" value="' + oceanus.htmlspecialchars(window.location.href) + '" />						<input type="hidden" name="pageTitle" id="pageTitle" value="' + oceanus.htmlspecialchars(document.title) + '" />						<input type="hidden" name="pageDescription" id="pageDescription" value="' + oceanus.htmlspecialchars(sl_getPageDescription()) + '" />						<input type="hidden" name="imageUrl" id="imageUrl" value="' + oceanus.htmlspecialchars(a) + '" />						<input type="hidden" name="width" id="width" value="' + oceanus.htmlspecialchars(b) + '" />						<input type="hidden" name="height" id="width" value="' + oceanus.htmlspecialchars(c) + '" />						<input type="hidden" name="videoId" id="width" value="' + oceanus.htmlspecialchars(d) + '" />                    </form>'; sl_reloadDiscussion = true; document.body.innerHTML += f; document.forms['sl_loadvideoclipform'].submit(); sl_jQuery('#sl_addphotoclipform').show() } function sl_showPhotoClipAddForm(a, b, c) { if (sl_jQuery('#sl_photoselect') != null) { sl_jQuery('#sl_photoselect').hide() } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } if (document.forms['sl_loadphotoclipform'] != 'undefined' && document.forms['sl_loadphotoclipform'] != null) { document.body.removeChild(document.forms['sl_loadphotoclipform']) } var d = document.createElement("iframe"); d.setAttribute("id", "sl_addphotoclipform"); d.setAttribute("name", "sl_addphotoclipform"); d.setAttribute("allowtransparency", "true"); d.setAttribute("frameborder", "0"); d.setAttribute("style", "width:962px;clear:both;border:none;display:block;padding: 0 !important;margin:0 auto !important;"); document.getElementById('sl_container').appendChild(d); var e = '<form id="sl_loadphotoclipform" style="display: none;" target="sl_addphotoclipform" method="post" action="' + sl_photoClipDomain + '">						<input type="hidden" name="pageUrl" id="pageUrl" value="' + oceanus.htmlspecialchars(window.location.href) + '" />						<input type="hidden" name="pageTitle" id="pageTitle" value="' + oceanus.htmlspecialchars(document.title) + '" />						<input type="hidden" name="pageDescription" id="pageDescription" value="' + oceanus.htmlspecialchars(sl_getPageDescription()) + '" />						<input type="hidden" name="imageUrl" id="imageUrl" value="' + oceanus.htmlspecialchars(a) + '" />						<input type="hidden" name="width" id="width" value="' + oceanus.htmlspecialchars(b) + '" />						<input type="hidden" name="height" id="width" value="' + oceanus.htmlspecialchars(c) + '" />                    </form>'; sl_reloadDiscussion = true; document.body.innerHTML += e; document.forms['sl_loadphotoclipform'].submit(); sl_jQuery('#sl_addphotoclipform').show() } function sl_showArticleClipUI() { if (document.articles == 'undefined' || document.articles == null || document.articles.length < 1) { window.alert("Sorry, we can't find articles on this page."); return } var b = document.getElementById('sl_articleselect'); if (b == null) { b = document.createElement("div"); b.setAttribute("id", "sl_articleselect"); document.getElementById('sl_container').appendChild(b); var c = document.createElement("div"); c.setAttribute("id", "sl_articleselecttitle"); b.appendChild(c); c.innerHTML = "Select Article To Clip"; var d = document.createElement("div"); d.setAttribute("id", "sl_articleselect_middle"); b.appendChild(d); if (document.articles != 'undefined' && document.articles != null) { for (var f = 0; f < document.articles.length; ++f) { var g = document.createElement("a"); g.setAttribute("href", "#"); g.setAttribute("onClick", "javascript:sl_showArticleClipForm(" + f + ");return false;"); g.setAttribute("class", "oceanus-content-link"); g.setAttribute("style", "color:#fff;font-weight:bold;text-decoration:none;font-size:13px;text-shadow: 0 -1px rgba(34, 25, 25, .3);"); g.innerHTML = "Clip Article"; var h = document.articles[f].cloneNode(true); sl_jQuery('a', h).each(function () { var a = document.createElement('span'); try { a.innerHTML = this.innerHTML; this.parentNode.replaceChild(a, this) } catch (e) { } }); h.insertBefore(g, h.firstChild); d.appendChild(h) } } } document.getElementById("sl_iframecontent").style.display = "none"; if (sl_clipphotoformContainer != null) { sl_clipphotoformContainer.style.display = "none" } if (sl_sharelinkContainer != null) { sl_sharelinkContainer.style.display = "none" } if (sl_jQuery('#sl_articleformiframe') != null) { sl_jQuery('#sl_articleformiframe').remove() } if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "none" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "block" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } } function sl_showVideoClipUI(a, b) { var c = document.getElementById('sl_videoselect'); if (c != null) { c.parentNode.removeChild(c) } c = document.createElement("div"); c.setAttribute("id", "sl_videoselect"); document.getElementById('sl_container').appendChild(c); var d = document.createElement("div"); d.setAttribute("id", "sl_photoselecttitle"); c.appendChild(d); d.innerHTML = "Select Video To Clip"; var e = document.createElement("div"); e.setAttribute("id", "sl_photoselect_middle"); c.appendChild(e); for (var i = 0; i < a.length; ++i) { var f = document.createElement("div"); f.setAttribute("class", "sl_photo_select_cont"); var g = document.createElement("a"); g.href = "#"; g.onclick = function (j, k, l, m) { return function () { sl_showVideoClipAddForm(j, k, l, m); return false } } (a[i].src, a[i].width, a[i].height, b[i]); f.appendChild(g); var h = document.createElement("img"); h.src = a[i].src; h.setAttribute("class", "sl_photo_select_img"); h.setAttribute("style", "" + sl_getPhotoSelectImgStyle(a[i])); g.appendChild(h); var n = document.createElement("span"); n.innerHTML = a[i].width + " x " + a[i].height; n.setAttribute("class", "sl_photo_select_img_caption"); g.appendChild(n); e.appendChild(f) } document.getElementById("sl_iframecontent").style.display = "none"; if (sl_clipphotoformContainer != null) { sl_clipphotoformContainer.style.display = "none" } if (sl_sharelinkContainer != null) { sl_sharelinkContainer.style.display = "none" } if (sl_jQuery('#sl_articleformiframe') != null) { sl_jQuery('#sl_articleformiframe').remove() } if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "none" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "block" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } } function sl_showPhotoClipUI(a) { var b = document.getElementById('sl_photoselect'); if (b != null) { b.parentNode.removeChild(b) } b = document.createElement("div"); b.setAttribute("id", "sl_photoselect"); document.getElementById('sl_container').appendChild(b); var c = document.createElement("div"); c.setAttribute("id", "sl_photoselecttitle"); b.appendChild(c); c.innerHTML = "Select Photo To Clip"; var d = document.createElement("div"); d.setAttribute("id", "sl_photoselect_middle"); b.appendChild(d); for (var i = 0; i < a.length; ++i) { var e = document.createElement("div"); e.setAttribute("class", "sl_photo_select_cont"); var f = document.createElement("a"); f.href = "#"; f.onclick = function (j, k, l) { return function () { sl_showPhotoClipAddForm(j, k, l); return false } } (a[i].src, a[i].width, a[i].height); e.appendChild(f); var g = document.createElement("img"); g.src = a[i].src; g.setAttribute("class", "sl_photo_select_img"); g.setAttribute("style", "" + sl_getPhotoSelectImgStyle(a[i])); f.appendChild(g); var h = document.createElement("span"); h.innerHTML = a[i].width + " x " + a[i].height; h.setAttribute("class", "sl_photo_select_img_caption"); f.appendChild(h); d.appendChild(e) } document.getElementById("sl_iframecontent").style.display = "none"; if (sl_clipphotoformContainer != null) { sl_clipphotoformContainer.style.display = "none" } if (sl_sharelinkContainer != null) { sl_sharelinkContainer.style.display = "none" } if (sl_jQuery('#sl_articleformiframe') != null) { sl_jQuery('#sl_articleformiframe').remove() } if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "block" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "none" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } } function sl_showPipflyLogin() { if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "none" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "none" } if (sl_clipphotoformContainer != null) { sl_clipphotoformContainer.style.display = "none" } if (sl_jQuery('#sl_articleformiframe') != null) { sl_jQuery('#sl_articleformiframe').remove() } if (sl_sharelinkContainer != null) { sl_sharelinkContainer.style.display = "none" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } if (document.getElementById('sl_iframecontent') != 'undefined' && document.getElementById('sl_iframecontent') != null) { document.getElementById('sl_container').removeChild(document.getElementById('sl_iframecontent')) } var a = document.createElement("iframe"); a.setAttribute("id", "sl_iframecontent"); a.setAttribute("name", "sl_iframecontent"); a.setAttribute("allowtransparency", "true"); a.setAttribute("frameborder", "0"); a.setAttribute("src", sl_LoginDomain + "?pageurl=" + window.location.href); a.setAttribute("style", "width:962px;clear:both;border:none;display:block;padding: 0 !important;margin:0 auto !important;"); document.getElementById('sl_container').appendChild(a) } function sl_showDiscussion() { if (document.getElementById("sl_photoselect") != null) { document.getElementById("sl_photoselect").style.display = "none" } if (document.getElementById("sl_videoselect") != null) { document.getElementById("sl_videoselect").style.display = "none" } if (document.getElementById("sl_articleselect") != null) { document.getElementById("sl_articleselect").style.display = "none" } if (sl_clipphotoformContainer != null) { sl_clipphotoformContainer.style.display = "none" } if (sl_jQuery('#sl_articleformiframe') != null) { sl_jQuery('#sl_articleformiframe').remove() } if (sl_sharelinkContainer != null) { sl_sharelinkContainer.style.display = "none" } if (sl_jQuery('#sl_addphotoclipform') != null) { sl_jQuery('#sl_addphotoclipform').remove() } if (sl_reloadDiscussion) { if (document.forms['sl_loadwebpageform'] != 'undefined' && document.forms['sl_loadwebpageform'] != null) { document.body.removeChild(document.forms['sl_loadwebpageform']) } if (document.getElementById('sl_iframecontent') != 'undefined' && document.getElementById('sl_iframecontent') != null) { document.getElementById('sl_container').removeChild(document.getElementById('sl_iframecontent')) } var a = document.createElement("iframe"); a.setAttribute("id", "sl_iframecontent"); a.setAttribute("name", "sl_iframecontent"); a.setAttribute("allowtransparency", "true"); a.setAttribute("frameborder", "0"); a.setAttribute("style", "width:962px;clear:both;border:none;display:block;padding: 0 !important;margin:0 auto !important;"); document.getElementById('sl_container').appendChild(a); var b = '<form id="sl_loadwebpageform" style="display: none;" target="sl_iframecontent" method="post" action="' + sl_dashboardDomain + '">						<input type="hidden" name="pageUrl" id="pageUrl" value="' + oceanus.htmlspecialchars(window.location.href) + '" />						<input type="hidden" name="pageTitle" id="pageTitle" value="' + oceanus.htmlspecialchars(document.title) + '" />						<input type="hidden" name="pageDescription" id="pageDescription" value="' + oceanus.htmlspecialchars(sl_getPageDescription()) + '" />                    </form>'; document.body.innerHTML += b; document.forms['sl_loadwebpageform'].submit(); sl_reloadDiscussion = false } else { document.getElementById("sl_iframecontent").style.display = "block" } } function sl_getPhotoSelectImgStylePerHeight(a, b) { if (Math.max(b, a) > 233) { if (b < a) { return "margin-top: " + parseInt(116 - 116 * (b / a)) + "px;" } return "" } else { return "margin-top: " + parseInt(116 - b / 2) + "px;" } } function sl_getPhotoSelectImgStyle(a) { if (Math.max(a.height, a.width) > 233) { if (a.height < a.width) { return "margin-top: " + parseInt(116 - 116 * (a.height / a.width)) + "px;" } return "" } else { return "margin-top: " + parseInt(116 - a.height / 2) + "px;" } } function isHidden(a) { var b; if (a.style.display == 'none' || a.style.visibility == 'hidden') return true; if (a.currentStyle) { b = a.currentStyle; if (b.display.toLowerCase() == 'none' || b.visibility.toLowerCase() == 'hidden') return true } else if (document.defaultView) { b = document.defaultView.getComputedStyle(a, ''); if (b.getPropertyValue('display') == 'none' || b.getPropertyValue('visibility') == 'hidden') return true } return false }